<form (ngSubmit)="saveForm()"
      (reset)="onFormReset()">
  <section #sectionRef
           [appTranslate2dWithFixForHalfPixelInChrome]="sectionRef"
           yPerc="0">
    <div class="form-container">
      <div>
        <ng-container *ngFor="let d of dataScientist; let i = index">
          <div [class.right-invalid-fix]="getInputRightInvalidFix(i)"
               class="form-row">
            <label class="form-row-label block"
                   for="id_{{ i }}"><span class="label-text">{{ d.label }}</span></label>
            <ng-container *ngIf="d.option?.addButton">
              <div (click)="addRow(i)"
                   [class.add-button-activated]="toggleArray[i]"
                   class="add-button">
                <ng-container [ngSwitch]="!d.option?.addButtonActivated">
                  <ng-container *ngSwitchCase="false"><span>[-]</span></ng-container>
                  <ng-container *ngSwitchCase="true"><span>[+]</span></ng-container>
                </ng-container>
              </div>
            </ng-container>
            <input #field="ngModel"
                   [(ngModel)]="d.field"
                   [defaultValue]="copyOfDataForDefaultValues[i].field"
                   [required]="d.option?.fieldRequired"
                   class="form-row-input left block input-text"
                   id="id_{{ i }}"
                   name="field_{{ i }}"
                   type="text">
            <ng-container [ngSwitch]="!d.option?.textarea">
              <ng-container *ngSwitchCase="true">
                <input #value="ngModel"
                       (ngModelChange)="d.value = $event; setInputRightInvalidFix(value.invalid, i)"
                       [defaultValue]="copyOfDataForDefaultValues[i].value"
                       [ngModel]="d.value"
                       [required]="d.option?.valueRequired"
                       class="form-row-input right block input-text"
                       name="value_{{ i }}"
                       type="text">
              </ng-container>
              <ng-container *ngSwitchCase="false">
                <textarea #value="ngModel"
                          (ngModelChange)="d.value = $event; setInputRightInvalidFix(value.invalid, i)"
                          [class.height-for-multiline]="checkForMultiLine(d.value)"
                          [defaultValue]="copyOfDataForDefaultValues[i].value"
                          [ngModel]="d.value"
                          [required]="d.option?.valueRequired"
                          class="form-row-input right block input-text"
                          name="value_{{ i }}"></textarea>
              </ng-container>
            </ng-container>
            <ng-container [ngSwitch]="field.invalid">
              <ng-container *ngSwitchCase="true">
                <div class="form-row-check">
                  <i class="material-icons block">highlight_off</i>
                  <div>
                    Lewe pole jest wymagane.
                  </div>
                </div>
              </ng-container>
            </ng-container>
            <ng-container [ngSwitch]="getInputRightInvalidFix(i)">
              <ng-container *ngSwitchCase="true">
                <div class="form-row-check">
                  <i class="material-icons block">highlight_off</i>
                  <div>
                    Prawe pole jest wymagane.
                  </div>
                </div>
              </ng-container>
            </ng-container>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="buttons-block">
      <div class="button">
        <button (click)="anuluj()"
                type="button"><span class="button-text">Anuluj</span></button>
      </div>
      <div class="button">
        <button type="reset"><span class="button-text">Reset</span></button>
      </div>
      <div class="button"
           style="position: relative">
        <button type="submit"><span class="button-text">Zapisz<br>formularz</span></button>
        <app-confirm-signal [timeoutMs]="2000"
                            leftPx="89"></app-confirm-signal>
      </div>
    </div>
  </section>
</form>
<app-foooter></app-foooter>
